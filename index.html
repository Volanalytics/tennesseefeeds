<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TennesseeFeeds.com - Debug Version</title>
    <style>
        :root {
            --primary: #0057e7;
            --secondary: #d62828;
            --light: #f4f4f4;
            --dark: #333;
            --gray: #e9e9e9;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: var(--light);
            line-height: 1.6;
        }
        
        header {
            background: linear-gradient(to right, var(--primary), var(--secondary));
            color: white;
            padding: 1rem 0;
            text-align: center;
        }
        
        .container {
            width: 90%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px 0;
        }
        
        nav {
            display: flex;
            justify-content: center;
            background-color: white;
            border-radius: 5px;
            margin-top: 1rem;
        }
        
        nav a {
            padding: 10px 20px;
            color: var(--dark);
            text-decoration: none;
            font-weight: 500;
        }
        
        nav a.active {
            color: var(--primary);
            border-bottom: 3px solid var(--primary);
        }
        
        .main-content {
            display: grid;
            grid-template-columns: 7fr 3fr;
            gap: 20px;
            margin-top: 2rem;
        }
        
        .news-feed, .sidebar {
            background-color: white;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }
        
        .news-item {
            margin-bottom: 2rem;
            border-bottom: 1px solid var(--gray);
            padding-bottom: 1rem;
        }
        
        .news-item h3 {
            margin-bottom: 0.5rem;
            color: var(--primary);
        }
        
        .news-item .source {
            font-size: 0.8rem;
            color: #777;
            margin-bottom: 0.5rem;
        }
        
        .news-item .interactions {
            display: flex;
            gap: 15px;
            margin-top: 1rem;
            font-size: 0.9rem;
        }
        
        .news-item .interactions button {
            background: none;
            border: none;
            color: #666;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .comment-section {
            margin-top: 1rem;
            background-color: var(--gray);
            padding: 15px;
            border-radius: 5px;
        }
        
        .comment-form input {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            margin-bottom: 10px;
        }
        
        .comment-form button {
            padding: 8px 15px;
            background-color: var(--primary);
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        
        .comments {
            margin-top: 15px;
        }
        
        .comment {
            background-color: white;
            padding: 10px;
            border-radius: 5px;
            margin-bottom: 10px;
        }
        
        .comment .user {
            font-weight: bold;
            color: var(--primary);
        }
        
        #debug-log {
            padding: 15px;
            background-color: #f8f8f8;
            border: 1px solid #ddd;
            border-radius: 5px;
            margin-top: 20px;
            font-family: monospace;
            white-space: pre-wrap;
            max-height: 300px;
            overflow-y: auto;
        }
        
        #debug-log .error {
            color: red;
        }
        
        #debug-log .info {
            color: blue;
        }
        
        #debug-log .success {
            color: green;
        }
        
        footer {
            text-align: center;
            padding: 2rem 0;
            background-color: var(--dark);
            color: white;
            margin-top: 2rem;
        }
        
        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
            }
        }
    </style>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-614P6J1FFX"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-614P6J1FFX');
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4301346862997799"
     crossorigin="anonymous">
</script>
</head>
<body>
    <header>
        <div class="container">
            <h1>TennesseeFeeds.com</h1>
            <p>Debug Version</p>
        </div>
        <nav class="container">
            <a href="#" class="active">All Tennessee</a>
            <a href="#">Nashville</a>
            <a href="#">Memphis</a>
            <a href="#">Knoxville</a>
            <a href="#">Chattanooga</a>
        </nav>
    </header>

    <div class="container main-content">
        <div class="news-feed">
            <h2>Latest Tennessee News</h2>
            <p id="loading-status">Loading content...</p>
            
            <!-- Debug log will show execution details -->
            <div id="debug-log">Debug Information:
            </div>
            
            <div id="content-area">
                <!-- Content will be loaded here -->
            </div>
        </div>
        
        <div class="sidebar">
            <h3>Debug Controls</h3>
            <button id="load-sample" style="margin: 10px 0; padding: 8px 15px; background-color: var(--primary); color: white; border: none; border-radius: 5px; cursor: pointer;">
                Load Sample Content
            </button>
            
            <h3>Popular Tags</h3>
            <div style="display: flex; flex-wrap: wrap; gap: 8px; margin-bottom: 2rem;">
                <span style="background-color: var(--gray); padding: 5px 10px; border-radius: 20px; font-size: 0.8rem;">Nashville</span>
                <span style="background-color: var(--gray); padding: 5px 10px; border-radius: 20px; font-size: 0.8rem;">Memphis</span>
                <span style="background-color: var(--gray); padding: 5px 10px; border-radius: 20px; font-size: 0.8rem;">Knoxville</span>
                <span style="background-color: var(--gray); padding: 5px 10px; border-radius: 20px; font-size: 0.8rem;">Sports</span>
                <span style="background-color: var(--gray); padding: 5px 10px; border-radius: 20px; font-size: 0.8rem;">Politics</span>
            </div>
        </div>
    </div>

    <footer>
        <div class="container">
            <p>&copy; 2025 TennesseeFeeds.com. All rights reserved.</p>
            <p>Contact: info@tennesseefeeds.com</p>
        </div>
    </footer>

    <script>
        // Debug logging function
        function debugLog(message, type = 'info') {
            const logElement = document.getElementById('debug-log');
            const logEntry = document.createElement('div');
            logEntry.className = type;
            logEntry.textContent = `[${new Date().toLocaleTimeString()}] ${message}`;
            logElement.appendChild(logEntry);
            console.log(`[${type}] ${message}`);
            
            // Scroll to bottom
            logElement.scrollTop = logElement.scrollHeight;
        }
        
        // Sample news data
        const sampleArticles = [
            {
                title: "Nashville's Music Row Historic Preservation Project Receives $3M Grant",
                link: "#article1",
                description: "The Music Row Preservation Foundation announced today that it has received a major grant to help preserve historic music studios in the district.",
                source: "Nashville Public Radio",
                pubDate: "4 hours ago",
                region: "Nashville",
                category: "Arts & Culture"
            },
            {
                title: "Tennessee Volunteers Add Five-Star Quarterback to 2026 Recruiting Class",
                link: "#article2",
                description: "The University of Tennessee football program received a major commitment from one of the nation's top-rated quarterback prospects for the 2026 recruiting class.",
                source: "Knoxville News Sentinel",
                pubDate: "6 hours ago",
                region: "Knoxville",
                category: "Sports"
            },
            {
                title: "New Memphis BBQ Trail Map Features 22 Essential Restaurants",
                link: "#article3",
                description: "The Memphis Tourism Board has released its 2025 BBQ Trail map featuring 22 must-visit BBQ joints across the city and surrounding areas.",
                source: "Memphis Commercial Appeal",
                pubDate: "8 hours ago",
                region: "Memphis",
                category: "Food"
            }
        ];
        
        // Display articles
        function displayArticles(articles) {
            const contentArea = document.getElementById('content-area');
            contentArea.innerHTML = '';
            
            if (articles.length === 0) {
                contentArea.innerHTML = '<p>No articles found.</p>';
                return;
            }
            
            articles.forEach(article => {
                const articleElement = document.createElement('div');
                articleElement.className = 'news-item';
                
                articleElement.innerHTML = `
                    <h3><a href="${article.link}">${article.title}</a></h3>
                    <div class="source">Source: ${article.source} • ${article.pubDate}</div>
                    <p>${article.description}</p>
                    <div class="interactions">
                        <button><span>👍</span> Like (0)</button>
                        <button><span>💬</span> Comment (0)</button>
                        <button><span>🔄</span> Share</button>
                    </div>
                    
                    <div class="comment-section">
                        <div class="comment-form">
                            <input type="text" placeholder="Add a comment...">
                            <button>Post</button>
                        </div>
                        <div class="comments"></div>
                    </div>
                `;
                
                contentArea.appendChild(articleElement);
            });
            
            initializeInteractions();
        }
        
        // Initialize interactions
        function initializeInteractions() {
            // Like button functionality
            const likeButtons = document.querySelectorAll('.interactions button:first-child');
            likeButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const currentText = button.textContent;
                    const currentCount = parseInt(currentText.match(/\d+/)[0]);
                    button.innerHTML = `<span>👍</span> Like (${currentCount + 1})`;
                });
            });
            
            // Comment form functionality
            const commentForms = document.querySelectorAll('.comment-form');
            commentForms.forEach(form => {
                const input = form.querySelector('input');
                const button = form.querySelector('button');
                const commentsContainer = form.parentElement.querySelector('.comments');
                
                button.addEventListener('click', () => {
                    if (input.value.trim() !== '') {
                        const newComment = document.createElement('div');
                        newComment.className = 'comment';
                        newComment.innerHTML = `
                            <div class="user">Guest${Math.floor(Math.random() * 1000)}</div>
                            <p>${input.value}</p>
                        `;
                        commentsContainer.prepend(newComment);
                        input.value = '';
                    }
                });
            });
        }
        
        // Try to fetch RSS feeds
        async function tryFetchRss() {
            debugLog('Attempting to fetch RSS feeds...', 'info');
            document.getElementById('loading-status').textContent = 'Attempting to fetch news...';
            
            try {
                // List of Tennessee RSS feeds
                const feeds = [
                    {
                        name: "The Tennessean",
                        url: "https://www.tennessean.com/rss/",
                        proxy: "https://api.rss2json.com/v1/api.json?rss_url="
                    },
                    {
                        name: "Knoxville News Sentinel",
                        url: "https://www.knoxnews.com/rss/",
                        proxy: "https://api.rss2json.com/v1/api.json?rss_url="
                    }
                ];
                
                // Try first feed
                const feed = feeds[0];
                debugLog(`Trying to fetch from ${feed.name}...`, 'info');
                
                const proxyUrl = `${feed.proxy}${encodeURIComponent(feed.url)}`;
                debugLog(`Fetching from URL: ${proxyUrl}`, 'info');
                
                const response = await fetch(proxyUrl);
                debugLog(`Response status: ${response.status}`, 'info');
                
                if (!response.ok) {
                    throw new Error(`Response not OK: ${response.status}`);
                }
                
                const data = await response.json();
                debugLog(`Data received, items: ${data.items ? data.items.length : 'none'}`, 'info');
                
                if (!data.items || data.items.length === 0) {
                    throw new Error('No items in feed');
                }
                
                // Process feed items
                const articles = data.items.map(item => {
                    return {
                        title: item.title,
                        link: item.link,
                        description: item.description.replace(/<[^>]*>/g, "").substring(0, 200) + "...",
                        source: feed.name,
                        pubDate: new Date(item.pubDate).toLocaleString(),
                        region: "Tennessee",
                        category: "News"
                    };
                });
                
                debugLog(`Successfully processed ${articles.length} articles`, 'success');
                document.getElementById('loading-status').textContent = 'News loaded successfully!';
                displayArticles(articles);
                
            } catch (error) {
                debugLog(`Error fetching RSS: ${error.message}`, 'error');
                debugLog('Falling back to sample data...', 'info');
                document.getElementById('loading-status').textContent = 'Error loading news, using sample data.';
                displayArticles(sampleArticles);
            }
        }
        
        // Initialize when DOM is loaded
        document.addEventListener('DOMContentLoaded', () => {
            debugLog('Page loaded, initializing...', 'info');
            
            // Set up load sample button
            document.getElementById('load-sample').addEventListener('click', () => {
                debugLog('Loading sample articles...', 'info');
                document.getElementById('loading-status').textContent = 'Sample content loaded.';
                displayArticles(sampleArticles);
            });
            
            // Set up navigation links
            const navLinks = document.querySelectorAll('nav a');
            navLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    navLinks.forEach(l => l.classList.remove('active'));
                    link.classList.add('active');
                    debugLog(`Navigation changed to: ${link.textContent}`, 'info');
                });
            });
            
            // Try to fetch RSS feeds
            tryFetchRss();
        });
    </script>
</body>
</html>
